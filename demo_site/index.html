<html>
<head>
  <link href="jquery-ui-1.11.2.custom/jquery-ui.css" rel="stylesheet">
  <script src="jquery-ui-1.11.2.custom/external/jquery/jquery.js"></script>
  <script src="jquery-ui-1.11.2.custom/jquery-ui.js"></script>
</head>
<body>
<h1>Pathfinder Online "Official Data" Viewer</h1>

<form id='itemSelect'>
<label for="autocomplete">Select an Entity: </label>
<input id="autocomplete" name='item'>
</form>

<div id='planDiv'>
</div>

<script type="text/javascript">

  var plan;

  $('#autocomplete').autocomplete({
      source: function(request, response) {
          $.ajax({
              url: 'entities',
              type: 'POST',
              dataType: 'json',
              data: { search: request.term },
              success: function(data) {
                 response($.map(data, function(item) {
                    return { label: item, value: item }
                 }));
              }
          });
      },
      minLength: 1
  });

  $('#itemSelect').submit(function() {
     $.ajax({
        url: 'plan',
        type: 'POST',
        dataType: 'json',
        data: $('#itemSelect').serialize(),
        success: function(data) {
           plan = data;
           $('<pre>').text(data[0]['plainText']).appendTo('#planDiv');
        }
     });
     return false;
  });

  $(function() {
     // handler for .ready() called
  });
</script>

</body>
</html>
